I"<p>Couple of days ago I downloaded an app for mac and I suspected it was a virus. Since I donâ€™t have an antivirus, I decided that it would be too risky to run the app without making sure I wonâ€™t suffer from any ransomware this winter.</p>

<p>Thereâ€™s a nice service called  <a href="https://www.virustotal.com/">VirusTotal</a> which allows you to upload a file, it then scans it using the most common antiviruses and shows you which ones think the file is malicious and which donâ€™t.</p>

<p>The only problem is that the file was pretty big (~300MB) and I didnâ€™t want to waste time uploading it to VirusTotal on the super slow Israeli upload bandwidth. Lucky for me, VirusTotal allow doing the same operation by entering the  <a href="https://en.wikipedia.org/wiki/Checksum">checksum</a> of the file.</p>

<p>Since Iâ€™m lazy as hell, getting the checksum of the file and searching for it on VirusTotal every time I wanted to check a file seemed too difficult; So I wrote a bash function that does it for me ðŸ™‚</p>

<pre><code class="language-bash"># Ephi's virus checker
 export PYTHONIOENCODING=utf8
 export VT_API_KEY=""
 
function isvirus {
     CHECKSUM="$(md5 -q $1)"
     curl -sS --request POST --url 'https://www.virustotal.com/vtapi/v2/file/report' -d   apikey=${VT_API_KEY} -d "resource=${CHECKSUM}" | \
     python -c "import sys, json; parsed = json.load(sys.stdin); print 'Don\\'t know..' if 'positives' not in parsed else 'nope..' if parsed['positives'] == 0 else 'yep..'"
 }
 # End Ephi's virus checker
</code></pre>

<p>Just copy and paste it into the end of your  <code>.bashrc</code> file (itâ€™s located in your home directory), replace the VirusTotal api key with your key (you can obtain one for free by signing up to VirusTotal) and then run  <code>source ~/.bashrc</code> or reopen your terminal and youâ€™re good to go!</p>

<p>To use this function just type  <code>isvirus FILENAME.EXTENTION</code> in the terminal, and it would print either  <code>Don't know</code> ,  <code>yep</code> or <code>nope</code> .. Simple as that!</p>
:ET